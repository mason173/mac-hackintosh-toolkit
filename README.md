# macOS 黑苹果工具箱 (Hackintosh Toolkit)

一个功能强大的macOS黑苹果系统维护工具箱，集成了多种实用功能。

## 🚀 主要功能

### 1. 制作macOS启动盘
- 自动检测macOS ISO文件
- 集成OpenCore引导系统
- 支持macOS Catalina 10.15.7
- 一键制作可启动U盘

### 2. U盘格式化工具
- **HFS+ (Mac OS Extended)** - 适用于macOS启动盘制作
- **ExFAT** - 跨平台文件存储，支持大文件
- **FAT32** - 最佳兼容性，适用于老设备
- **APFS** - Apple最新文件系统，性能优秀

### 3. macOS系统更新管理
- **屏蔽系统更新** - 防止意外更新破坏黑苹果系统
- **恢复系统更新** - 需要时重新启用更新功能
- 智能管理更新守护进程

## 📋 系统要求

- macOS 10.13 或更高版本
- 管理员权限
- 至少8GB的U盘（制作启动盘时）

## 🛠️ 使用前准备

### 制作启动盘需要准备：
1. `Install-macOS-Catalina-10.15.7_19H15.iso` - macOS Catalina ISO文件
2. `EFI` 文件夹 - 包含OpenCore配置
   - 确保 `EFI/OC/config.plist` 文件存在
   - 配置文件需要适配目标硬件

## 🚀 快速开始

1. **下载脚本**
   ```bash
   git clone https://github.com/your-username/mac-toolkit.git
   cd mac-toolkit
   ```

2. **添加执行权限**
   ```bash
   chmod +x mac_toolkit.sh
   ```

3. **运行脚本**
   ```bash
   ./mac_toolkit.sh
   ```

## 📖 详细使用说明

### 制作启动盘
1. 将ISO文件和EFI文件夹放在脚本同目录下
2. 选择菜单选项 "1) 制作macOS启动盘"
3. 按提示选择U盘设备
4. 确认操作后等待制作完成（约20-30分钟）

### 格式化U盘
1. 选择菜单选项 "2) 格式化U盘"
2. 选择目标U盘设备
3. 选择合适的文件系统格式
4. 确认操作后开始格式化

### 管理系统更新
- **屏蔽更新**：选择选项3，适用于稳定的黑苹果系统
- **恢复更新**：选择选项4，需要系统更新时使用

## ⚠️ 重要提醒

1. **数据备份**：所有操作都会格式化U盘，请提前备份重要数据
2. **硬件兼容性**：确保OpenCore配置与目标硬件兼容
3. **系统稳定性**：屏蔽更新功能会影响安全更新，请谨慎使用
4. **管理员权限**：某些功能需要sudo权限

## 🔧 故障排除

### 常见问题

**Q: ISO文件挂载失败**
A: 检查ISO文件是否完整，文件名是否正确

**Q: EFI分区挂载失败**
A: 确保U盘已正确格式化为GPT分区表

**Q: OpenCore启动失败**
A: 检查config.plist配置是否适配目标硬件

**Q: 系统更新屏蔽不生效**
A: 重启系统后生效，或检查管理员权限

## 📝 更新日志

### v2.0.0
- 重构代码结构，提升稳定性
- 新增多种U盘格式化选项
- 优化用户界面和提示信息
- 增强错误处理和异常捕获
- 添加详细的使用说明和安全提醒

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个工具！

## 📄 许可证

MIT License - 详见 [LICENSE](LICENSE) 文件

## ⚡ 免责声明

本工具仅供学习和研究使用。使用本工具制作的启动盘和进行的系统修改可能会影响系统稳定性，请在充分了解风险的情况下使用。作者不承担因使用本工具造成的任何损失。

---

**如果这个工具对你有帮助，请给个⭐️支持一下！**